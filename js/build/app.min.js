function writeCookie(a,b,c){var d,e;c?(d=new Date,d.setTime(d.getTime()+24*c*60*60*1e3),e="; expires="+d.toGMTString()):e="",document.cookie=a+"="+b+e+"; path=/"}function readCookie(a){var b,c,d,e=a+"=";for(d=document.cookie.split(";"),b=0;b<d.length;b++){for(c=d[b];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(e))return c.substring(e.length,c.length)}return""}jQuery(document).ready(function(a){function b(){a(".o-collection").on("click",".js-fetch-projects",function(b){b.preventDefault();var d=a(this),e=d.data("post-type"),f=a(".o-collection__list"),h=a(".js-append"),j="",k=a(".o-album").last().data("index"),l=d.data("query"),b=0,m=d.data("tag"),n=parseInt(a(".o-album").last().data("id"))+1,o=0,p=0;j=i?i:"all","fetch"==l&&(k=0,n=0),a.ajax({url:ajaxURL,data:{action:"fetch_projects",offset:g,post_type:e,year:j,index:k,query:l,tag:m,project_id:n},dataType:"text",beforeSend:function(){console.log("offset: "+g+" post_type: "+e+" year: "+j+" index: "+k+" query: "+l+" tag: "+m+" count:"+o),"update"==l?(d.addClass("is-loading"),d.find(".u-super").html(" fetching")):(d.addClass("is-loading"),f.addClass("s--empty"),f.html('<a class="o-button is-loading s--big"><span>Smile :) </span></a>'))},success:function(e){"update"==l?(d.removeClass("is-loading"),"0"!=e?(a(".o-collection__list").append(e),c(a(".is-appended .js-lazy")),b=parseInt(a(".o-album").last().data("id")),o=parseInt(a(".o-album").last().data("count")),p=o-(b+1),p>0?d.find(".u-super").html(p):d.find("span").html("Back to Top"),g+=parseInt(posts_per_page)):a("html, body").animate({scrollTop:0},500)):(a(".js-others").addClass("u-hide"),f.removeClass("s--empty"),d.removeClass("is-loading"),"0"!=e&&(f.html(e),c(a(".is-appended .js-lazy")),b=parseInt(a(".o-album").last().data("id")),o=parseInt(a(".o-album").last().data("count")),p=o-(b+1),p>0?(h.removeClass("u-hide"),h.find(".u-super").html(p)):(h.addClass("u-hide"),a(".js-others").removeClass("u-hide"))))}})})}function c(b){b.bind("inview",function(b,c){if(c){var d=a(this),e=d.data("thumb"),f=d.data("thumb-medium");f&&Modernizr.mq("(max-width: 640px)")&&(e=f),e&&(d.removeClass("js-lazy"),d.css("background-image","url("+e+")"),d.addClass("is-loaded"),d.parent().find(".o-spinner__wrap").hide())}})}function d(){a(".o-filter__label").click(function(b){b.preventDefault(),a(".o-filter-list").toggleClass("is-open")}),a(".o-filter-list").on("click","a",function(b){b.preventDefault();var c=a(this),d=a(".o-filter-list"),e=c.data("time");i=e,d.find(".is-selected").removeClass("is-selected"),c.closest(".o-filter").find(".o-filter__active").html(e),c.closest(".o-filter__wrap").find(".o-filter__button").removeClass("u-hide"),c.addClass("is-selected"),c.closest(".o-filter-list").removeClass("is-open")})}function e(){a("body").removeClass("u-oh"),a(".c-pop__box .u-canvas").html(""),a(".c-pop__box").removeClass("s--narrow"),a(".s--quote").addClass("c-form"),a(".c-pop").hide(),a(".c-pop__box .c-contact").addClass("u-hide"),a(".c-pop__box .u-canvas").addClass("u-hide")}function f(){Modernizr.input.placeholder||(a("input[placeholder], textarea[placeholder]").each(function(){var b=a(this).attr("placeholder");""==this.value&&(this.value=b),a(this).focus(function(){this.value==b&&(this.value="")}).blur(function(){""==a.trim(this.value)&&(this.value=b)})}),a(".c-form form").submit(function(){a(this).find("input[placeholder], textarea[placeholder]").each(function(){this.value==a(this).attr("placeholder")&&(this.value="")})})),Modernizr.input.required?a(".c-form form").ajaxForm({beforeSend:function(){a(".c-form button").addClass("is-submiting"),a(".c-form button span").html("Sending")},success:function(){a(".c-form button").removeClass("is-submiting"),a(".c-form .c-form__status").html("Thank you. Your Request was sent"),a(".c-form button span").html("Send"),a(".c-form form").each(function(){this.reset(),writeCookie("contact",1,5)})},resetForm:!0}):(a.validator.addMethod("valueNotEquals",function(a,b,c){return c!=a},"Value must not equal arg."),a(".c-form form").validate({rules:{userName:{valueNotEquals:"Your Name",required:!0},userTelephone:{valueNotEquals:"Telephone",required:!0},userEmail:{valueNotEquals:"E-mail",required:!0},userEvent:{valueNotEquals:"",required:!0}},errorPlacement:function(a,b){},invalidHandler:function(b,c){a(".c-form .c-form__status").html("Check the fields in red")},submitHandler:function(b){a(b).ajaxSubmit({beforeSend:function(){a(".c-form button").addClass("is-submiting"),a(".c-form button span").html("Sending")},success:function(){a(".c-form button").removeClass("is-submiting"),a(".c-form .c-form__status").html("Thank you. Your Request was sent"),a(".c-form button span").html("Send"),a(".c-form form").each(function(){this.reset(),writeCookie("contact",1,5)})}})}})),a("body").on("change","#userEvent",function(){var b=a(this),c=b.val(),d=a("#c-wedding"),e=a("#c-engagement"),f=a("#c-other");"1"==c&&(a(".c-form-group").not("#c-wedding").addClass("u-hide"),d.removeClass("u-hide")),"2"==c&&(a(".c-form-group").not("#c-engagement").addClass("u-hide"),e.removeClass("u-hide")),"3"==c&&(a(".c-form-group").not("#c-other").addClass("u-hide"),f.removeClass("u-hide"))})}var g=parseInt(posts_per_page);a(document).on("click",'a[href*="#"]:not([href="#"])',function(b){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var c=a(this.hash);c=c.length?c:a("[name="+this.hash.slice(1)+"]"),c.length&&(a("html, body").animate({scrollTop:c.offset().top},1e3),b.preventDefault())}}),a(".c-menu").on("click","a",function(){var b=a(this);b.hasClass("js-show-search")||(a(".c-menu").find(".is-active").removeClass("is-active"),a(this).closest(".c-menu__item").addClass("is-active"),a(".c-menu").removeClass("is-open"),a(".c-menu__toggle").removeClass("is-active"))}),a(".c-logo").click(function(){a(".c-menu").find(".is-active").removeClass("is-active")}),a(".c-menu__toggle").click(function(b){b.preventDefault(),a(this).toggleClass("is-active"),a(".c-menu").toggleClass("is-open")}),a(document).mouseup(function(b){var c=a(".c-header");c.is(b.target)||0!==c.has(b.target).length||(a(".c-menu").removeClass("is-open"),a(".c-menu__toggle").removeClass("is-active"))}),a(document).mouseup(function(b){var c=a(".o-filter__wrap");c.is(b.target)||0!==c.has(b.target).length||a(".o-filter-list").removeClass("is-open")}),a(document).mouseup(function(b){var c=a(".c-search");c.is(b.target)||0!==c.has(b.target).length||a(".c-search").removeClass("is-active")}),a(".js-show-search").click(function(b){b.preventDefault(),a(".c-search").toggleClass("is-active"),a(".c-search__input").focus(),a(".c-menu").removeClass("is-open")}),a(".c-search .s--close").click(function(b){b.preventDefault(),a(".c-search").removeClass("is-active"),a(".c-search form").each(function(){this.reset()})});var h=[];a.getJSON(projectsURL,function(a){var b=0;for(b=0;b<a.length;b++)h.push(a[b])}),a("#search").autocomplete({lookup:h,dataType:"json",onSelect:function(a){window.location.href=a.data}}),a("body").on("click",".js-share",function(b){b.preventDefault();var c=a(this);c.find(".o-icon").toggleClass("s--close"),c.toggleClass("is-active"),a(".c-album__cover .c-social").toggleClass("is-visible")});var i="";a("body").on("click",'.js-video, .c-album__cover a[href*="youtube"]',function(b){b.preventDefault();var c=a(this),d=c.attr("href");c.data("video")?videoID=c.data("video"):(p=d.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/),videoID=p[1],console.log(videoID)),videoID&&(a("body").addClass("u-oh"),a(".c-pop").show(),a(".c-pop__box .u-canvas").removeClass("u-hide"),a(".c-pop__box .u-canvas").html("<iframe id=ytplayer type=text/html src=https://www.youtube.com/embed/"+videoID+"?autoplay=1&vq=hd720></iframe>"))}),a(".js-close-pop").click(function(a){a.preventDefault(),e()}),a(".c-pop").click(function(){e()}),a(".c-pop .c-pop__box").click(function(a){a.stopPropagation()}),a(".js-top").click(function(b){b.preventDefault(),a("html, body").animate({scrollTop:0},"slow")}),a(window).scroll(function(){var b=a(window).scrollTop();b>10?(a(".c-header").addClass("is-fixed"),a(".js-top").addClass("is-visible")):(a(".c-header").removeClass("is-fixed"),a(".js-top").removeClass("is-visible")),readCookie("contact")||(b>500&&b<1500?a(".c-msg__btn").addClass("is-visible"):a(".c-msg__btn").removeClass("is-visible"))}),a(".js-show-contact").click(function(b){return b.preventDefault(),a("body").addClass("u-oh"),a(".c-pop").show(),a(".s--quote").removeClass("c-form"),a(".c-pop__box").addClass("s--narrow"),a(".c-pop__box .c-contact").removeClass("u-hide"),!1}),a("body").on("change","#albumCount",function(){var b=a(this);"other"==b.val()?a("#otherCount").show():a("#otherCount").hide()});var j=800;Modernizr.mq("(max-width: 767px)")&&(j=300);var k=Barba.BaseView.extend({namespace:"home",onEnter:function(){a("body").addClass("t-home"),a(".c-slide").each(function(){var b=a(this),c=b.data("thumb");document.createElement("img");b.css("background-image","url("+c+")")});new Swiper(".c-slides",{loop:!0,speed:j,autoplay:6e3,autoplayDisableOnInteraction:!1,nextButton:".swiper-button-next",prevButton:".swiper-button-prev"});a(".scene").parallax()},onLeave:function(){a("body").removeClass("t-home")}});k.init();var l=Barba.BaseView.extend({namespace:"archive",onEnter:function(){b(),d(),a(".c-menu .is-active").removeClass("is-active")}});l.init();var m=Barba.BaseView.extend({namespace:"weddings",onEnter:function(){a("body").addClass("t-weddings"),a(".c-menu .is-active").removeClass("is-active"),a(".js-wedding").addClass("is-active"),b(),d()},onLeave:function(){a("body").removeClass("t-weddings"),a(".js-wedding").removeClass("is-active")}});m.init();var n=Barba.BaseView.extend({namespace:"engagements",onEnter:function(){a("body").addClass("t-engagements"),a(".c-menu .is-active").removeClass("is-active"),a(".js-engagement").addClass("is-active"),b(),d()},onLeave:function(){a("body").removeClass("t-engagements"),a(".js-engagement").removeClass("is-active")}});n.init();var o=Barba.BaseView.extend({namespace:"single",onEnter:function(){a("body").addClass("t-single")},onLeave:function(){a("body").removeClass("t-single")}});o.init();var p=Barba.BaseView.extend({namespace:"video",onEnter:function(){a("body").addClass("t-video"),a(".js-videos").addClass("is-active"),b(),d()},onLeave:function(){a("body").removeClass("t-video"),a(".js-videos").removeClass("is-active")}});p.init();var q=Barba.BaseView.extend({namespace:"team",onEnter:function(){a("body").addClass("t-team"),a(".js-team").addClass("is-active");var b=["s--h1","s--h2","s--h3","s--h4"];a(".c-team article").each(function(){a(this).addClass(b[~~(Math.random()*b.length)])}),a(".c-grid__moments .o-moment").each(function(){a(this).addClass(b[~~(Math.random()*b.length)])});var c=a(".c-grid__moments");c.isotope({itemSelector:".o-moment",layoutMode:"packery"})},onLeave:function(){a("body").removeClass("t-team"),a(".js-team").removeClass("is-active")}});q.init(),a("#barba-wrapper").on("click",".o-album a",function(){var b=a(this),c=b.data("target");c&&(a(".c-menu .is-active").removeClass("is-active"),a(".js-"+c).addClass("is-active"))}),Barba.Pjax.start();var r=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.fadeIn.bind(this)),a(".c-edges").addClass("is-active"),a("body").addClass("is-exiting")},fadeOut:function(){return a(this.oldContainer).animate({opacity:0}).promise()},fadeIn:function(){var b=this,d=a(this.newContainer);a(this.oldContainer).hide(),d.css({visibility:"visible",opacity:0}),a("html, body").animate({scrollTop:0},0),a(".c-loader").addClass("is-exiting"),a("body").removeClass("is-exiting"),a(".c-edges").removeClass("is-active"),window.setTimeout(function(){a(".c-loader").removeClass("is-exiting")},1e3),d.animate({opacity:1},400,function(){b.done(),AOS.init(),c(a(".js-lazy")),g=parseInt(posts_per_page)})}});Barba.Pjax.getTransition=function(){return r},AOS.init(),f(),c(a(".js-lazy"))});